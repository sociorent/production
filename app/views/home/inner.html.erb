<%= stylesheet_link_tag "inner" %>
<%= javascript_include_tag "inner/application" %>
<% if @user %>
  <div id="user">
    <div class="left">
      <div>Welcome, <%= @user.name %></div>
    </div>
    <div class="right">
      <div>
        <% if @user %>
          <%= link_to "SignOut", destroy_user_session_path, :method => :delete %>
        <% else %>
          <%= link_to "SignUp/SignIn", user_omniauth_authorize_path(:facebook) %>
        <% end %>
      </div>
      <div id="cart_button">Cart <span></span></div>
      <div id="compare_button">Compare</div>
      <div class="clear"></div>
    </div>
    <div class="clear"></div>
  </div>
<% end %>
<div id="compare_box">
	<div id="compare"></div>
	<div id="compare_options">
		<div id="compare_dialog_button">Compare</div>
		<div id="compare_close">Close</div>
		<div class="clear"></div>
	</div>
</div>
<div id="content">
	<div class="left">
		
		<form id="search_books_form" class="form-search">
		  <input type="text" id="search_books_input" class="input-medium search-query" placeholder="Search books">
		</form>
		<div id="close_search_books">close</div>
		<div class="clear"></div>
		<div id="search_books">
		</div>
		<div id="no_search_result">
			<form id="request_form">
			  <legend>Request a Book</legend>
			  <label></label>
			  <input id="request_title" type="text" placeholder="Book Title">
			  <input id="request_author" type="text" placeholder="Author">
			  <input id="request_isbn" type="text" placeholder="ISBN">
			  <button id="request_submit" type="submit" class="btn">Submit</button>
			</form>
			<div id="request_error"></div>
		</div>

	</div>
	<div class="right">

		<!-- tabs links -->
		<div id="tabs">
			<ul>
				<li><a href="#intelligent_books">Books</a></li>
				<li><a href="#resources">Resources</a></li>
			</ul>

			<!-- tabs content -->
			<div id="intelligent_books">
				<div class="intelligent_books_single"><%= image_tag "/assets/book.jpeg" %></div>
			</div>

			<div id="resources">
				this is a resource tab
			</div>

		</div>
		
	</div>
	<div class="clear"></div>
</div>

<%= render :partial => "template" %>

<%= render :partial => "dialog" %>

<script type="text/javascript">
	$(document).ready(function(){

		// cart collection reset 
		sociorent.collections.cart_object.reset(<%= raw @cart.to_json() %>);
		sociorent.fn.renderCart();
		//search collection reset
		sociorent.collections.search_object.reset(<%= raw @search.to_json() %>);
		sociorent.fn.renderSearch();

		// setting width and height
		var width = $(window).width();

		// Provide some space between the window edges.
		width = width - 50;

		$("#book_details_box").dialog({
			autoOpen: false,
			draggable: false,
			height: 700,
			width: width,
			resizable: false,
			buttons: {
                Ok: function () {
                    $(this).dialog("close");
                }
            },
      modal: true
		});

		$("#cart_box").dialog({
			autoOpen: false,
			draggable: false,
			height: 550,
			width: 700,
			resizable: false,
			modal: true
		});

		$("#checkout_box").dialog({
			autoOpen: false,
			draggable: false,
			height: 550,
			width: 700,
			resizable: false,
			modal: true
		});
		
		$("#order_box").dialog({
			autoOpen: false,
			draggable: false,
			height: 550,
			width: 700,
			resizable: false,
			modal: true
		});

		$("#compare_dialog").dialog({
			autoOpen: false,
			draggable: false,
			height: 700,
			width: 1100,
			resizable: false,
			buttons: {
                Ok: function () {
                    $(this).dialog("close");
                }
            },
      modal: true
		});
		
		$("#tabs").tabs();
	});
</script>